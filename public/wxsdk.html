<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>jssdk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name='apple-touch-fullscreen' content='yes'>
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no">
  <meta name="format-detection" content="address=no">
  <script src="/js/jquery.min.js"></script>
  <script src="http://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>
</head>
<body>

</body>
<script>
  $(function () {
    var signUrl = window.location.href.split('#')[0];
    $.ajax({
        url: "/wx/config?url=" + window.location.href,
        method: "get",
        
        success: function (data) {
          wx.config({
            debug: true,
            appId: data.appid,
            timestamp: data.timestamp,
            nonceStr: data.nonceStr,
            signature: data.signature,
            jsApiList: ['onMenuShareAppMessage']
          })

          wx.ready(function() {
            wx.updateAppMessageShareData({ 
                title: '1111', // 分享标题
                desc: '2222', // 分享描述
                link: '', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
                imgUrl: '', // 分享图标
                success: function (data) {
                  console.log('zzzzzzz', data)
                  // 设置成功
                }
                
            })
          })

          
          wx.error(function() {
            console.log('wx error')
          })
        }
    });
  });

</script>
</html>
